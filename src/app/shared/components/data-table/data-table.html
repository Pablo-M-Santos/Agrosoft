<div class="table-container">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z2">


        <ng-container *ngFor="let column of columns" [matColumnDef]="column.key">

            <th mat-header-cell *matHeaderCellDef>
                {{ column.label }}
            </th>

            <td mat-cell *matCellDef="let element">

                <ng-container [ngSwitch]="column.type">


                    <span *ngSwitchCase="'text'">
                        {{ element[column.key] }}
                    </span>

                    <span *ngSwitchCase="'phone'">
                        {{ formatPhone(element[column.key]) }}
                    </span>

                    <span *ngSwitchCase="'status'" [ngStyle]="{
                            'background-color': element[column.colorKey || 'statusColor'], 
                            'color': element[column.textColorKey || 'statusTextColor']
                            }" class="status-badge">
                        {{ element[column.key] }}
                    </span>

                    <span *ngSwitchCase="'actions'" class="actions-cell">
                        <button mat-icon-button (click)="edit.emit(element)">
                            <mat-icon>edit</mat-icon>
                        </button>
                        <button mat-icon-button (click)="delete.emit(element)">
                            <mat-icon>delete</mat-icon>
                        </button>
                    </span>

                </ng-container>

            </td>

        </ng-container>


        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    </table>
</div>